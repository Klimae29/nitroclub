<%= render "components/header" %>
<a href="<%= root_path %>" class="back-to-index">← Retour à l'accueil</a>

<div class="container">
  <div class="row">
    <div class="col-12">
      <div class="car-image-container">
        <% if @car.image.attached? %>
          <%= image_tag @car.image, class: "car-image img-fluid", alt: @car.name %>
        <% else %>
          <%= image_tag "https://res.cloudinary.com/demo/image/upload/v1621234567/placeholder-car.png", class: "car-image img-fluid", alt: "Placeholder Car" %>
        <% end %>
      </div>
    </div>
  </div>

  <div class="row mt-4">
    <div class="col-md-8 car-details">
      <h1><%= @car.name %></h1>
      <p class="car-style">Type : <%= @car.style.capitalize %></p>
      <p class="car-year">Année : <%= @car.year %></p>
      <p class="car-price">Prix : <strong><%= @car.price %>€ / jour</strong></p>
      <p class="car-description"><%= @car.description %></p>
      <p class="car-rating">Évaluation : <%= @car.respond_to?(:rating) ? "#{@car.rating} ★" : "4.5 ★" %></p>
      <p class="car-card__location">Maubeuge, Nord</p>
    </div>

    <div class="col-md-4 rental-form">
      <h2>Réserver cette voiture</h2>
      <%= form_with(model: [@car, Rental.new], url: rentals_path, method: :post, local: true) do |f| %>
        <div class="form-group">
          <label>Date de début :</label>
          <%= f.date_field :start_date, required: true, class: "form-control" %>
        </div>

        <div class="form-group">
          <label>Date de fin :</label>
          <%= f.date_field :end_date, required: true, class: "form-control" %>
        </div>

        <%= f.submit "Réserver", class: "btn btn-primary w-100 mt-3" %>
      <% end %>
    </div>
  </div>
</div>
